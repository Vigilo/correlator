[bus]
log_traffic = True
host = localhost
service = pubsub.localhost
jid = correlator@localhost
password = correlator

watched_topics = /home/localhost/connector-nagios/event, /home/localhost/connector-nagios/downtime
owned_topics = /home/localhost/correlator/correvent, /home/localhost/correlator/aggr, /home/localhost/correlator/delaggr, /home/localhost/correlator/state

[connector]
backup_file = @LOCALSTATEDIR@/lib/vigilo/correlator/correlator.sqlite
backup_table_from_bus = frombus
backup_table_to_bus = tobus

[correlator]
memcached_host = 127.0.0.1
memcached_port = 11215
memcached_type = inet

debug = False
validate_messages = False

nagios_hls_jid = connector-nagios@localhost
nagios_hls_host = HLS

sqlalchemy_url = postgres://vigilo:vigilo@localhost/vigilo

queue_size = 100
rules_timeout = 2

syslog_data_level = 20

rules = vigilo.corr.rules.hls_deps, vigilo.corr.rules.lls_deps, vigilo.corr.rules.update_attribute, vigilo.corr.rules.update_occurrences_count, vigilo.corr.rules.priority


# La priorité associée à une alerte sur un
# hôte/service technique qui n'impacte aucun
# service de haut niveau.
unknown_priority_value = 4

# Indique si les alertes sont triées par
# priorité croissante ou décroissante.
priority_order = asc

[publications]
# Indique le nœud cible du message en fonction du type.
correvent = /home/localhost/correlator/correvent
aggr = /home/localhost/correlator/aggr
delaggr = /home/localhost/correlator/delaggr
state = /home/localhost/correlator/state


[loggers]
keys=root,twisted,syslog

[handlers]
keys=console,syslog

[formatters]
keys=simpleFormatter,nullFormatter

[logger_root]
level=DEBUG
handlers=console

[logger_twisted]
level=DEBUG
qualname=twisted
propagate=1
handlers=

[logger_syslog]
level=DEBUG
qualname=vigilo.corr.syslog
propagate=0
handlers=syslog

[handler_console]
class=StreamHandler
level=DEBUG
formatter=simpleFormatter
args=(sys.stdout, )

[handler_syslog]
class=handlers.SysLogHandler
level=DEBUG
formatter=nullFormatter
args='/dev/log', 'daemon'

[formatter_simpleFormatter]
format=[%(created)f] %(levelname)s::%(processName)s::%(name)s::%(message)s
datefmt=

[formatter_nullFormatter]
format=%(message)s
datefmt=
